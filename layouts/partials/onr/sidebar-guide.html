{{ $currentPage := . }}
{{/* Define the paths to the main ONR program pages */}}
{{ $paths := slice
"/neuromorphic-computing/research/"
"/neuromorphic-computing/research/call-for-papers-onr.md"
"/neuromorphic-computing/research/guide/submitter-guide/"
"/neuromorphic-computing/research/guide/reviewer-guide/"
"/neuromorphic-computing/research/guide/review-criteria/"
"/neuromorphic-computing/research/guide/badge-system/"
}}

{{/* ONR Guide Card */}}
<div class="px-3 pt-5 pb-5 content-panel mb-6">
  <strong class="text-xl pl-3">ONR Program Guide</strong>
  <nav id="TableOfContents" class="mt-4">
    <ul>
      {{ range $paths }}
      {{ with site.GetPage . }}
      {{ $isActive := eq ($currentPage.RelPermalink | strings.TrimRight "/") (strings.TrimRight .RelPermalink "/") }}
      <li class="{{ if $isActive }}active{{ end }}">
        <a href="{{ .RelPermalink }}">{{ .Title }}</a>
      </li>
      {{ end }}
      {{ end }}
    </ul>
  </nav>
</div>

{{/* Display Program Lead Card only on the research list page (which is a "section" kind) */}}
{{ if .IsSection }}
{{ $researchSection := site.GetPage "neuromorphic-computing/research" }}
{{ with $researchSection }}
{{ partial "onr/program-lead.html" . }}
{{ end }}
{{ end }}


{{/* On This Page (Table of Contents) Card */}}
{{ if and .IsPage .Params.showTableOfContents (ne .TableOfContents `<nav id="TableOfContents"></nav>`) }}
<div class="sticky top-24 px-3 pt-5 pb-5 content-panel">
  <strong class="text-xl pl-3">On This Page</strong>
  <div id="tableOfContentContainer" class="mt-4">
    {{ .TableOfContents }}
  </div>
</div>
{{ end }}
